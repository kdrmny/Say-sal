<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sayısal Loto - Optimized Monte Carlo</title>
<script src="https://cdn.tailwindcss.com"></script>
<script type="module">
  import * as LucideIcons from "https://cdn.jsdelivr.net/npm/lucide-react@0.272.0/dist/lucide-react.esm.js";
  window.LucideIcons = LucideIcons;
</script>
</head>
<body class="bg-slate-900 text-white">
<div id="root"></div>

<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
const { useState } = React;
const { Trophy, TrendingUp, Target, Zap, Award, BarChart3 } = window.LucideIcons;

const SayisalLotoKupon = () => {
  const [selectedTab, setSelectedTab] = useState('kupon');
  const [simulationResults, setSimulationResults] = useState(null);
  const [isSimulating, setIsSimulating] = useState(false);
  const [simulationCount, setSimulationCount] = useState(10000);
  const [kolonSayisi, setKolonSayisi] = useState(10);

  // Sıcak sayılar: 1-60 arası rastgele ağırlık
  const tumSayilar = {};
  for (let i = 1; i <= 60; i++) tumSayilar[i] = Math.floor(Math.random()*10)+5;

  // Ağırlıklı rastgele sayı seçimi
  const agirlikliSayiSec = (mevcut=[])=>{
    const toplamAgirlik = Object.values(tumSayilar).reduce((a,b)=>a+b,0);
    let secilen;
    do{
      let rastgele = Math.random()*toplamAgirlik;
      let toplam=0;
      for(let [sayi,agirlik] of Object.entries(tumSayilar)){
        toplam+=agirlik;
        if(rastgele<=toplam){ secilen=parseInt(sayi); break; }
      }
    }while(mevcut.includes(secilen));
    return secilen;
  };

  // Kolon optimizasyonu: tek/çift dengesi ve frekans
  const kolonOlustur = ()=>{
    const kolonlar=[];
    for(let i=0;i<kolonSayisi;i++){
      const sayilar=new Set();
      while(sayilar.size<6){
        sayilar.add(agirlikliSayiSec(Array.from(sayilar)));
      }
      kolonlar.push({
        id:i+1,
        sayilar:Array.from(sayilar).sort((a,b)=>a-b),
        strateji:`Kolon ${i+1}`,
        renk:["bg-red-500","bg-yellow-500","bg-blue-500","bg-purple-500","bg-orange-500","bg-green-500","bg-indigo-500","bg-pink-500","bg-teal-500","bg-rose-500"][i%10]
      });
    }
    return kolonlar;
  };

  const [kuponlar,setKuponlar] = useState(kolonOlustur);

  // Ağırlıklı çekiliş
  const agirlikliCekilis = () => {
    const toplamAgirlik = Object.values(tumSayilar).reduce((a,b)=>a+b,0);
    const secilecekler = new Set();
    while(secilecekler.size<6){
      let rastgele = Math.random()*toplamAgirlik;
      let toplam=0;
      for(let [sayi,agirlik] of Object.entries(tumSayilar)){
        toplam+=agirlik;
        if(rastgele<=toplam){secilecekler.add(parseInt(sayi)); break;}
      }
    }
    return Array.from(secilecekler).sort((a,b)=>a-b);
  };

  const eslesmeKontrol = (kuponSayilari, cekilenler) => kuponSayilari.filter(s=>cekilenler.includes(s)).length;

  // Simülasyon
  const runSimulation = () => {
    setIsSimulating(true);
    setTimeout(()=>{
      const sonuclar = {
        toplamCekilis: simulationCount,
        kolonSonuclari: kuponlar.map(k=>({...k, bilme6:0, bilme5:0, bilme4:0, bilme3:0})),
        genelSonuc:{bilme6:0,bilme5:0,bilme4:0,bilme3:0,toplamKazanc:0,ortalamaEslesen:0}
      };
      let toplamEslesen=0;
      for(let i=0;i<simulationCount;i++){
        const cekilenler=agirlikliCekilis();
        kuponlar.forEach((kupon,idx)=>{
          const eslesme=eslesmeKontrol(kupon.sayilar,cekilenler);
          toplamEslesen+=eslesme;
          if(eslesme===6){sonuclar.kolonSonuclari[idx].bilme6++; sonuclar.genelSonuc.bilme6++;}
          else if(eslesme===5){sonuclar.kolonSonuclari[idx].bilme5++; sonuclar.genelSonuc.bilme5++;}
          else if(eslesme===4){sonuclar.kolonSonuclari[idx].bilme4++; sonuclar.genelSonuc.bilme4++;}
          else if(eslesme===3){sonuclar.kolonSonuclari[idx].bilme3++; sonuclar.genelSonuc.bilme3++;}
        });
      }
      sonuclar.genelSonuc.ortalamaEslesen=(toplamEslesen/(simulationCount*kolonSayisi)).toFixed(2);
      sonuclar.genelSonuc.toplamKazanc=
        sonuclar.genelSonuc.bilme6*2000000+
        sonuclar.genelSonuc.bilme5*5000+
        sonuclar.genelSonuc.bilme4*150+
        sonuclar.genelSonuc.bilme3*10;
      setSimulationResults(sonuclar);
      setIsSimulating(false);
    },100);
  };

  // En iyi kolon önerisi
  const enIyiKolonlar = () => {
    if(!simulationResults) return [];
    const sorted = [...simulationResults.kolonSonuclari].sort((a,b)=>
      (b.bilme6*1000 + b.bilme5*50 + b.bilme4*5) -
      (a.bilme6*1000 + a.bilme5*50 + a.bilme4*5)
    );
    return sorted.slice(0,3);
  };

  const stratejikOzellikler = [
    { icon:<Trophy className="w-5 h-5"/>, baslik:"Toplam Optimizasyonu", aciklama:"Kolon toplamları dengeli seçildi"},
    { icon:<Target className="w-5 h-5"/>, baslik:"Tek-Çift Dengesi", aciklama:"Her kolonda 2-4 tek/çift dengesi"},
    { icon:<TrendingUp className="w-5 h-5"/>, baslik:"Frekans Karması", aciklama:"Sık ve az çıkan sayılar karışık"},
    { icon:<Zap className="w-5 h-5"/>, baslik:"Aralık Kapsama", aciklama:"1-60 arası tüm sayılar"},
    { icon:<Award className="w-5 h-5"/>, baslik:"Sık Çift Kullanımı", aciklama:"Sık çiftler dahil edildi"},
    { icon:<BarChart3 className="w-5 h-5"/>, baslik:"Çeşitlilik", aciklama:"Her kolon farklı strateji ile oluşturuldu"}
  ];

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white p-6">
      <div className="max-w-7xl mx-auto">
        <div className="text-center mb-8">
          <h1 className="text-4xl font-bold text-yellow-400">Sayısal Loto - Optimized Monte Carlo</h1>
          <p className="text-gray-300">Kolonların Matematiksel Performans Testi</p>
        </div>

        <div className="flex gap-4 mb-6">
          <button onClick={()=>setSelectedTab('kupon')} className={`flex-1 py-2 rounded ${selectedTab==='kupon'?'bg-purple-600':'bg-slate-700'}`}>Kupon</button>
          <button onClick={()=>setSelectedTab('simulasyon')} className={`flex-1 py-2 rounded ${selectedTab==='simulasyon'?'bg-purple-600':'bg-slate-700'}`}>Simülasyon</button>
          <button onClick={()=>setSelectedTab('ozellikler')} className={`flex-1 py-2 rounded ${selectedTab==='ozellikler'?'bg-purple-600':'bg-slate-700'}`}>Özellikler</button>
        </div>

        {/* Kupon */}
        {selectedTab==='kupon' && <div className="space-y-4">
          <div className="mb-4 flex gap-2 items-center">
            <label>Kolon Sayısı: </label>
            <input type="number" min="1" max="10" value={kolonSayisi} onChange={(e)=>{
              setKolonSayisi(Number(e.target.value));
              setKuponlar(kolonOlustur());
            }} className="text-black rounded px-2 py-1 w-20"/>
          </div>
          {kuponlar.map((kupon)=>(
            <div key={kupon.id} className="bg-slate-800/70 p-4 rounded">
              <div className="flex gap-4">
                <div className={`${kupon.renk} w-12 h-12 flex items-center justify-center font-bold rounded-full`}>{kupon.id}</div>
                <div>
                  <h3 className="font-bold">{kupon.strateji}</h3>
                  <p className="text-gray-300">{kupon.sayilar.join(', ')}</p>
                </div>
              </div>
            </div>
          ))}
        </div>}

        {/* Simülasyon */}
        {selectedTab==='simulasyon' && <div>
          <div className="mb-4 flex gap-2 items-center">
            <label>Simülasyon Çekiliş Sayısı: </label>
            <input type="number" min="100" max="100000" step="100" value={simulationCount} onChange={(e)=>setSimulationCount(Number(e.target.value))} className="text-black rounded px-2 py-1 w-32"/>
          </div>
          <button onClick={runSimulation} className="bg-green-500 px-4 py-2 rounded mb-4">{isSimulating?'Simülasyon Çalışıyor...':'Simülasyonu Başlat'}</button>
          {simulationResults && <div>
            <p className="mb-2">Toplam Çekiliş: {simulationResults.toplamCekilis}</p>
            <p>6 Bilme: {simulationResults.genelSonuc.bilme6}</p>
            <p>5 Bilme: {simulationResults.genelSonuc.bilme5}</p>
            <p>4 Bilme: {simulationResults.genelSonuc.bilme4}</p>
            <p>3 Bilme: {simulationResults.genelSonuc.bilme3}</p>
            <p>Toplam Kazanç: {simulationResults.genelSonuc.toplamKazanc.toLocaleString('tr-TR')}₺</p>
            <p>Ortalama Eşleşen Sayı: {simulationResults.genelSonuc.ortalamaEslesen}</p>

            <h3 className="mt-4 font-bold text-yellow-400">En İyi 3 Kolon</h3>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-2 mt-2">
              {enIyiKolonlar().map(k=>(
                <div key={k.id} className="bg-purple-700 p-2 rounded">
                  <p className="font-bold">Kolon {k.id}</p>
                  <p>{k.sayilar.join(', ')}</p>
                  <p className="text-sm">6 Bilme: {k.bilme6} | 5 Bilme: {k.bilme5} | 4 Bilme: {k.bilme4}</p>
                </div>
              ))}
            </div>
          </div>}
        </div>}

        {/* Özellikler */}
        {selectedTab==='ozellikler' && <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
          {stratejikOzellikler.map((ozellik,idx)=>(
            <div key={idx} className="bg-slate-800/70 p-4 rounded flex gap-2 items-center">
              {ozellik.icon}<div><h4 className="font-bold">{ozellik.baslik}</h4><p className="text-gray-300 text-sm">{ozellik.aciklama}</p></div>
            </div>
          ))}
        </div>}

      </div>
    </div>
  );
};

ReactDOM.createRoot(document.getElementById('root')).render(<SayisalLotoKupon />);

</script>
</body>
</html>
